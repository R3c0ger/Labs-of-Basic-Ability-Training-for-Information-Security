# 实验1-6实验报告

## 实验一

### 实验目的

建 DVWA 靶机环境。

### 实验过程

1. 配置代理，使用 NAT 模式，安装 proxychains 并配置。
2. 下载 DVWA 到本地：输入 `proxychains git clone https://github.com/digininja/DVWA.git`，再输入 `sudo mv DVWA /var/www/html` 移动到相应文件夹中。
3. 开启 apache2 服务： `sudo service apache2 start`
4. 拷贝配置文件：`cp config/config.inc.php.dist config/config.inc.php`

![](img/Pasted%20image%2020230415171348.png)

5. 开启数据库：`service mariadb start`
6. 配置数据库，在 root 用户下创建用户，验证创建成功。

![](img/Pasted%20image%2020230415175345.png)

7. 在最新版本（8.2）中开启 PHP function allow_url_include、安装 php-gd 模块、设置文件夹的写权限、在 dvwa/config/config.inc.php 中设置 reCAPTCHA key。

![](img/Pasted%20image%2020230415194645.png)

8. 在 security.php 中设置安全等级，在此设置为 Low。

## 实验二

### 实验目的

> 请求方式：HTTP 请求方法, HTTP/1.1协议中共定义了八种方法（也叫动作）来以不同方式操作指定的资源。

使用某一请求方法对某网页请求以得到 flag。

### 实验过程

HTTP/1.1协议的八种请求方法为：`GET`、`HEAD`、`POST`、`PUT`、`DELETE`、`CONNECT`、`OPTIONS`、`TRACE`。可以使用 `curl -X` 指定请求方法。

启动环境，打开给出的网页链接，发现网页内容如下：

```
HTTP Method is GET

Use CTF**B Method, I will give you flag.

Hint: If you got 「HTTP Method Not Allowed」 Error, you should request index.php.
```

![](img/Pasted%20image%2020230422103912.png)

可以看到，网页提示使用 `CTF**B` 方法，而非上述八种方法的任何一种。若提示 `HTTP Method Not Allowed` 错误，需要请求 `index.php`。可以很明显地猜出，该方法是 `CTFHUB` 方法。

在终端使用 `curl -X CTFHUB http://challenge-4c545ef0343a22ef.sandbox.ctfhub.com:10800`，结果如下：

```html
<html>
<head><title>405 Not Allowed</title></head>
<body bgcolor="white">
<center><h1>405 Not Allowed</h1></center>
<hr><center>nginx/1.14.2</center>
</body>
</html>
```

![](img/Pasted%20image%2020230422103957.png)

可以看到，返回了错误命令 `405 Not Allowed`，因此我们需要请求 `index.php`。使用 `curl -X CTFHUB http://challenge-4c545ef0343a22ef.sandbox.ctfhub.com:10800/index.php`，结果如下：

```HTML
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8"/>
    <title>CTFHub HTTP Method</title>
</head>
<body>

good job! ctfhub{e84096dc8207f72c5bf5d28b}

</body>
</html>
```

![](img/Pasted%20image%2020230422104115.png)

得到 flag：`ctfhub{e84096dc8207f72c5bf5d28b}`

## 实验三

### 实验目的

302跳转

### 实验过程



## 实验四

### 实验目的

Cookie

### 实验过程



## 实验五

### 实验目的

基础认证

### 实验过程



## 实验六

### 实验目的

响应包源代码

### 实验过程


